System.register(["./chunk-vendor.js","./chunk-frameworks.js","./chunk-color-modes.js","./chunk-runner-groups.js"],(function(){"use strict";var e,t,s,o,r,n,c,i,a,l,u,d,m,p,h,f,g,y,j,b,v,S,q,k,w,L;return{setters:[function(u){e=u.o,t=u._,s=u.t,o=u.c,r=u.g,n=u.r,c=u.d,i=u.a,a=u.p,l=u.f},function(e){u=e.j,d=e.aE,m=e.I,p=e.a,h=e.aS,f=e.t,g=e.r,y=e.J,j=e.p,b=e.e,v=e.n,S=e.g,q=e.ap,k=e.b4,w=e.aj},function(e){L=e.g},function(){}],execute:function(){e("change",".js-policy-repos-container .js-repository-item-checkbox",(function(e){const t=e.target,s=t.closest(".js-policy-repos-container").querySelector(".js-policy-repos-form"),o=function(e){const t=document.createElement("input");return t.type="hidden",t.name=e.checked?"enable[]":"disable[]",t.value=e.value,t}(t),r=s.querySelector(`[value='${o.value}']`);r?r.replaceWith(o):s.append(o)}));let A=class ActionsPolicyPopoverElement extends HTMLElement{togglePopover(){this.popover.hidden=!this.popover.hidden}};function T(e,t){const s=new URLSearchParams(window.location.search);s.set(e,t);const o=new URL(window.location.href,window.location.origin);o.search=s.toString(),u(d(),"",o.toString())}async function x(e){const t=document.querySelector(".js-ghas-entity-list-container");if(null==t)return;const s=t.querySelector("[data-show-on-error]"),o=t.querySelector("[data-loading]"),r=t.querySelector("[data-content-container]");if(null==r)return void E(s,o,r);let n,c=t.getAttribute("data-src");if(null!=c){if(void 0!==e){const s=new URL(c,window.origin);s.pathname=s.pathname.replace(/\d+$/,e.toString());const o=s.toString();if(c===o)return;c=o;const r=t.querySelector(".js-advanced-security-entities-pagination");r&&(r.hidden=!0);const n=t.querySelector("[data-pager-loading]");n&&n.removeAttribute("hidden")}else if(r.children.length>0)return;try{n=await p(document,c)}catch(i){return void E(s,o,r)}n?(o&&(o.hidden=!0),r.innerHTML="",r.appendChild(n)):E(s,o,r)}else E(s,o,r)}function E(e,t,s){e&&(e.hidden=!1),t&&(t.hidden=!0),s&&(s.innerHTML="")}t([s],A.prototype,"popover",void 0),A=t([o],A),e("details-menu-selected",".js-actions-runner-platform-menu",(function(e){const t=e.detail.relatedTarget,s=t.closest(".js-actions-runner-instructions"),o=s.querySelector(".js-actions-runner-architecture-menu"),r=t.getAttribute("data-download-os"),n=o.getAttribute("data-default-architecture");for(const c of o.querySelectorAll("[data-download-os]")){const e=c.getAttribute("data-download-os");c.hidden=e!==r,e===r&&c.getAttribute("data-download-architecture")===n&&c.click()}s.querySelector(".js-actions-runner-windows-instructions").hidden="win"!==r,s.querySelector(".js-actions-runner-unix-instructions").hidden="win"===r,T("os",r)}),{capture:!0}),e("details-menu-selected",".js-actions-runner-architecture-menu",(function(e){const t=e.detail.relatedTarget,s=t.closest(".js-actions-runner-instructions"),o=t.getAttribute("data-download-url"),r=t.getAttribute("data-download-filename");for(const n of s.querySelectorAll(".js-action-runner-url"))n.textContent=o;for(const n of s.querySelectorAll(".js-action-runner-filename"))n.textContent=r;T("arch",t.getAttribute("data-download-architecture"))}),{capture:!0}),(async()=>{await m,x()})(),document.addEventListener("pjax:end",(function(){x()})),window.addEventListener("popstate",(function(e){null===e.state&&x(1)})),window.addEventListener("statechange",(function(){const e=parseInt(new URLSearchParams(document.location.search).get("advanced_security_entities_page")||"");isNaN(e)||x(e)})),e("click",".js-advanced-security-entities-pagination a",(function(e){if(null==e||null==e.target)return;const t=e.target.href,s=new URL(t,window.origin),o=new URLSearchParams(document.location.search);for(const[r,n]of o)s.searchParams.has(r)||s.searchParams.append(r,n);h(null,"",s.toString()),e.preventDefault()}));let C=class AppearanceFormElement extends HTMLElement{connectedCallback(){let e=document.URL;e.match(/profile_to_settings=1&?/)&&(e=e.replace(/profile_to_settings=1&?/,""),e.match(/\?$/)&&(e=e.replace(/\?$/,"")),window.history.replaceState({},document.title,e))}changePanel(e){const t=e.currentTarget.value;for(const s of this.modePanels){const e=s.getAttribute("data-mode-panel")!==t;if(s.hidden=e,!e){const e=s.querySelector("form");e&&this.activateForm(e)}}}activateForm(e){const t=e.querySelectorAll('input[type="radio"]:checked');if(0===t.length){const t=L(),s=this.getClientTheme(t),o=e.querySelector(`input[value=${s}]`);o&&(o.checked=!0,this.changeTheme(o))}else for(const s of t)this.changeTheme(s);e.dispatchEvent(new Event("submit"))}getClientTheme(e){const t=document.querySelector("html[data-color-mode]");if(t)return t.getAttribute(`data-${e}-theme`)}themeClicked(e){const t=e.currentTarget;this.changeTheme(t)}changeTheme(e){window.clearTimeout(this.saveTimeout),this.saveMessage.hidden=!0;const t=e.value,s=e.getAttribute("data-type"),o=e.getAttribute("data-mode");t&&s&&o&&(this.setClientMode(o),"auto"===t?(this.setClientTheme("light","light"),this.setClientTheme("dark","dark")):this.setClientTheme(t,s))}async saveTheme(e){e.preventDefault();const t=e.currentTarget,s=new FormData(t);200===(await fetch(t.action,{method:t.method,body:s,headers:{"X-Requested-With":"XMLHttpRequest"}})).status&&this.saved()}saved(){window.clearTimeout(this.saveTimeout),this.saveMessage.hidden=!1,this.saveTimeout=window.setTimeout((()=>{this.saveMessage.classList.add("Toast--animateOut"),setTimeout((()=>{this.saveMessage.hidden=!0,this.saveMessage.classList.remove("Toast--animateOut")}),1e3)}),3500)}setClientMode(e){const t=document.querySelector("html[data-color-mode]");t&&t.setAttribute("data-color-mode",e)}setClientTheme(e,t){const s=document.querySelector("html[data-color-mode]");s&&s.setAttribute(`data-${t}-theme`,e)}};t([s],C.prototype,"saveMessage",void 0),t([r],C.prototype,"modePanels",void 0),C=t([o],C);let M=class AppearancePreviewElement extends HTMLElement{connectedCallback(){this.checkActive(),window.matchMedia(`(prefers-color-scheme: ${this.getAttribute("data-mode")})`).addEventListener("change",(()=>this.checkActive()))}themePreview(e){const t=e.currentTarget;if(!t)return;const s=t.getAttribute("data-theme");for(const o of this.themePreviews)o.hidden=o.getAttribute("data-theme")!==s}previewReset(){const e=this.boxElement.querySelector("input:checked").value;for(const t of this.themePreviews)t.hidden=t.getAttribute("data-theme")!==e}checkActive(){this.getAttribute("data-mode")===L()?(this.boxElement.classList.add("Box--blue"),this.activeLabel.hidden=!1):(this.boxElement.classList.remove("Box--blue"),this.activeLabel.hidden=!0)}};function _(e,t){const s=e.querySelector(".js-app-logo-with-bgcolor");s instanceof HTMLElement&&(s.style.backgroundColor="#"+t)}function P(){return document.querySelectorAll(".js-selected-repository-field")}function H(){const e=document.querySelector("#repository-menu-list"),t=Array.from(P()).map((e=>e.value));let s=!1;for(const r of e.querySelectorAll("[role=menuitem]")){const e=t.includes(r.value);s||e||(s=!0),r.hidden=e}const o=e.querySelector(".js-no-repository-found");o instanceof HTMLElement&&(o.hidden=s)}function D(){const e=!document.querySelector(".js-select-repositories-radio").checked||P().length>0,t=document.querySelector(".js-integrations-install-form-submit");t&&t instanceof HTMLButtonElement&&(t.disabled=!e)}function I(){const e=P().length,t=document.querySelector(".js-integration-total-repos");t.hidden=0===e,t.textContent=`Selected ${e} ${1===e?"repository":"repositories"}.`}async function F(e){const t=await fetch(e.action,{method:e.method,body:new FormData(e),headers:{Accept:"text/fragment+html"}});if(t.status>=400){const e="An unknown error occurred.",t=document.querySelector("template.js-flash-template");t.after(new a(t,{className:"flash-error",message:e}))}else{const s=e.closest("[data-replace-remote-form-target]"),o=j(document,await t.text());s.replaceWith(o)}}function $(e,t,s){const o=e.split(t);return o[o.length-1]=s,o.join(t)}function R(){return document.querySelector("input.js-edit-integration-setup-url")}function B(){return document.querySelector(".js-help-text-for-redirect-on-update")}function N(e){e&&(R().closest(".form-group").querySelector(".js-setup-url-hint").textContent=e)}function O(){const e=document.getElementById("js-update-integration-permissions");e&&e.removeAttribute("disabled")}function W(){return function(){const e=document.querySelectorAll('[id^=integration_permission_]:checked:not([data-permission="none"])');return Array.from(e,(e=>e.getAttribute("data-resource")))}().flatMap((e=>function(e){return e?Array.from(document.querySelectorAll(`.js-integration-hook-event[data-resource~="${e}"]:checked`)):[]}(e)))}function U(e,t){document.querySelector(`.js-dropdown-container[data-resource~='${e}']`).classList.add("anim-fade-in","d-none"),document.querySelector(t).innerHTML=""}function z(e=!1){const t=document.querySelector(".js-integration-permissions-selector [id=integration_permission_metadata_read]"),s=t.closest(".js-list-group-item");e&&b(t,!0),s.querySelector(".js-mandatory-label").hidden=!e;for(const o of s.querySelectorAll("input"))o!==t&&(o.disabled=e)}function V(){const e=document.querySelector(".js-content-references input"),t=document.querySelector(".js-content-references template"),s=document.querySelector(".js-content-references-domain-list"),o=e.value;if(!o)return;const r=t.content.cloneNode(!0);r instanceof DocumentFragment&&(r.querySelector("input").value=o,r.querySelector(".js-content-references-domain-url").textContent=o,e.value="",s.appendChild(r),s.closest(".Box").hidden=!1,O())}function X(){const e=document.querySelector(".js-single-files input"),t=document.querySelector(".js-single-files template"),s=document.querySelector(".js-single-files-path-list"),o=e.value;if(!o)return;const r=t.content.cloneNode(!0);r instanceof DocumentFragment&&(r.querySelector("input").value=o,r.querySelector(".js-single-files-path").textContent=o,e.value="",s.appendChild(r),s.closest(".Box").hidden=!1,O())}function J(e,t){for(const s of document.querySelectorAll(".js-setting-toggle .js-status-indicator"))s.classList.remove("status-indicator-success","status-indicator-loading","status-indicator-failed");e.classList.add(t)}async function G(e){if(!e)return;const t=e.getAttribute("data-url");if(!t)return;let s;try{s=await p(document,t),e.innerHTML="",e.append(s)}catch(o){window.location.reload()}}async function Y(e){const t=e.currentTarget.querySelectorAll(".js-checkbox-scope:checked:disabled");for(const s of t)s.disabled=!1}function K(e,t){let s=ee(e);s=function(e,t){const s=e.indexOf(t);s>-1&&e.splice(s,1);return e}(s,t),e.setAttribute("data-selected-by",s.join(" ")),Z(e)}function Q(e,t){const s=ee(e);s.push(t),e.setAttribute("data-selected-by",s.join(" ")),Z(e)}function Z(e){const t=e.getAttribute("data-selected-by");e.checked=""!==t,e.disabled=e.checked&&"user"!==t}function ee(e){return e.getAttribute("data-selected-by")?e.getAttribute("data-selected-by").split(" "):[]}t([s],M.prototype,"boxElement",void 0),t([s],M.prototype,"activeLabel",void 0),t([r],M.prototype,"themePreviews",void 0),M=t([o],M),n(".js-app-bgcolor-form",(async function(e,t){const s=e.querySelector(".js-app-bgcolor-save-notice");if(!s)return;let o;try{o=await t.html()}catch(r){s.classList.remove("visible")}o&&(s.classList.add("visible"),setTimeout((()=>s.classList.remove("visible")),1500))})),f(".js-app-bgcolor-input",(function(e){const t=e.target;if(!(t instanceof HTMLInputElement))return;const s=t.closest("form"),o=t.value.replace(/^#/,"");if(o.length<1)return t.classList.remove("color-text-danger"),void _(s,t.defaultValue);t.checkValidity()?(t.classList.remove("color-text-danger"),_(s,o),s.classList.contains("js-app-bgcolor-form")&&c((()=>function(e,t){t.checkValidity()&&g(e)}(s,t)),400)()):(t.classList.add("color-text-danger"),_(s,t.defaultValue))})),i(".js-apps-install-select-repositories-container remote-input",(e=>{e.addEventListener("remote-input-success",H),e.addEventListener("remote-input-error",H)})),e("details-menu-selected",".js-apps-install-select-repositories-menu",(function(e){const t=e.detail.relatedTarget,s=document.querySelector(".js-integrations-install-repo-picked"),o=t.querySelector("template").content.cloneNode(!0);s.prepend(o),document.querySelector(".js-min-repository-error").hidden=!0,document.querySelector(".js-max-repository-warning").hidden=!function(){const e=document.querySelector(".js-integrations-install-form");if(e instanceof HTMLFormElement){const t=+(e.getAttribute("data-max-repos")||0);return t>0&&P().length>=t}}(),I(),D(),H()}),{capture:!0}),e("change",".js-integrations-install-form",D),e("click",".js-repository-picker-remove",(function(e){e.currentTarget.closest(".js-repository-picker-result").remove(),document.querySelector(".js-min-repository-error").hidden=P().length>0,I(),D(),H()})),e("change",".js-installation-repositories-radio",(function(){const e=document.querySelector(".js-select-repositories-radio");document.querySelector(".js-integrations-install-repo-selection").classList.toggle("has-removed-contents",!e.checked)})),e("submit",".js-dependabot-selected-repos-remove-form",(async function(e){const t=e.currentTarget;e.preventDefault(),F(t)})),e("auto-complete-change",".js-dependabot-selected-repos-add-auto-complete",(function(e){const t=e.target;if(!t.value)return;t.querySelector(".js-dependabot-selected-repos-add-input").value=t.value,t.value="";F(t.closest("form"))})),y("keydown",".js-dependabot-selected-repos-add-search",(function(e){"Enter"===e.key&&e.preventDefault()})),i(".js-email-global-unsubscribe-form",(function(e){e.querySelector(".js-email-global-unsubscribe-submit").disabled=!0})),e("change",".js-email-global-unsubscribe-form",(function(e){const t=e.currentTarget,s=t.querySelector(".js-email-global-unsubscribe-submit"),o=t.querySelectorAll(".js-email-global-unsubscribe"),r=Array.from(o).some((e=>e.checked!==e.defaultChecked));s.disabled=!r})),n(".js-email-unsubscribe-form",(async function(e,t){await t.text();for(const s of document.querySelectorAll(".js-email-unsubscribe-message"))s instanceof HTMLElement&&(s.hidden=!s.hidden)})),e("change","input.js-application-callback-url-field",(function({currentTarget:e}){let t=e.id;t=$(t,"_","_destroy");const s=document.getElementById(t);if(s instanceof HTMLInputElement){const t=e.value;s.value=""===t?"true":"false"}})),e("click",".js-add-application-callback-url",(function(e){e.preventDefault();const t=document.querySelector(".js-application-callback-urls");if(!t)return;const s=t.querySelectorAll(".js-application-callback-url"),o=s.length;if(0===o)return;const r=s[o-1],n=r.cloneNode(!0);if(!(n instanceof HTMLElement))return;let c=t.getAttribute("data-index");null===c&&(c="0");const i=(parseInt(c,10)+1).toString();t.setAttribute("data-index",i);const a=n.querySelector("label");if(!a)return;const l=a.getAttribute("for");a.setAttribute("for",l.replace(/\d+/,c));const u=n.querySelector("input");u&&(u.id=u.id.replace(/\d+/,c),u.name=u.name.replace(/\d+/,c),u.value="",r.insertAdjacentElement("afterend",n))})),e("click",".js-delete-application-callback-url",(function(e){e.preventDefault();const t=e.currentTarget.closest(".js-application-callback-url");if(!t)return;const s=t.querySelector("input");if(!s)return;const o=document.querySelector(".js-application-callback-urls");if(!o)return;o.querySelectorAll(".js-application-callback-url").length>1?t.remove():s.value="";let r=s.id;r=$(r,"_","_destroy");const n=document.getElementById(r);n instanceof HTMLInputElement&&(n.value="true")})),e("change",".js-edit-integration-request-oauth-on-install",(function(e){const t=e.target,s=R();if(t.checked){s.disabled=!0,s.placeholder=s.getAttribute("data-hint-unavailable-when-install")||"";N(s.getAttribute("data-hint-same-as-callback-url")||"");const e=B();e.textContent=e.getAttribute("data-hint-redirect-on-update-callback-url")||""}else{s.disabled=!1,s.placeholder="",s.value=s.getAttribute("data-setup-url")||"";N(s.getAttribute("data-hint-setup-url")||"");const e=B();e.textContent=e.getAttribute("data-hint-redirect-on-update-setup-url")||""}})),e("change",".js-integration-permissions-selector [id^=integration_permission_]",(function({currentTarget:e}){const t=e.getAttribute("data-permission"),s=e.getAttribute("data-resource")||"",o=document.querySelectorAll(`.js-integration-hook-event[data-resource~="${s}"]`),r=document.querySelectorAll(`.js-dropdown-container[data-resource~="${s}"]`);if(O(),"none"!==t){const t=document.querySelectorAll(`.js-integration-hook-event-permission-error[data-resource~='${s}']`);for(const e of t)e.classList.add("d-none");for(const e of o)e.readOnly=!1;e.closest(".js-list-group-item").classList.remove("disabled");for(const e of r)e.classList.remove("d-none")}else{for(const e of o)n=e,W().includes(n)||(e.readOnly=!0,e.checked=!1,e.closest(".js-dropdown-container").classList.add("anim-fade-in","d-none"));e.closest(".js-list-group-item").classList.add("disabled"),"single_file"===s?U(s,".js-single-files-path-list"):"content_references"===s&&U(s,".js-content-references-domain-list")}var n})),e("change",".js-hook-active-checkbox",(function(e){const t=e.currentTarget;for(const s of document.querySelectorAll(".js-integration-hook-enabled"))s.hidden=!t.checked})),e("change",".js-integration-permissions-selector [id^=integration_permission_][data-resource-parent^=repository]",(function({currentTarget:e}){const t=e.getAttribute("data-permission");"metadata"!==(e.getAttribute("data-resource")||"")&&("none"!==t?z(!0):function(){let e=!0;const t=document.querySelectorAll(".js-integration-permissions-selector [id^=integration_permission_][data-resource-parent=repository]:checked");for(const s of t){const t=s.getAttribute("data-permission")||"none";if("metadata"!==(s.getAttribute("data-resource")||"")&&"none"!==t){e=!1;break}}return e}()&&z())})),e("change",".js-integration-permissions-selector [name^=integration]",O),e("click",".js-integration-permissions-selector .js-integration-hook-event",(function(e){const t=e.currentTarget;if(t.readOnly){t.closest(".js-send-events").querySelector(".js-integration-hook-event-permission-error").classList.remove("d-none"),e.preventDefault()}})),y("keydown",".js-content-references input",(function(e){"Enter"===e.key&&(e.preventDefault(),V())})),e("click",".js-content-references .js-domain-add",V),e("click",".js-content-references .js-close",(function(e){if(!(e.target instanceof Element))return;const t=e.target.closest("li"),s=t.parentElement;s&&(s.removeChild(t),0===s.querySelectorAll("li").length&&(s.closest(".Box").hidden=!0),O())})),y("keydown",".js-single-files input",(function(e){"Enter"===e.key&&(e.preventDefault(),X())})),e("click",".js-single-files .js-path-add",X),e("click",".js-single-files .js-close",(function(e){if(!(e.target instanceof Element))return;const t=e.target.closest("li"),s=t.parentElement;s&&(s.removeChild(t),0===s.querySelectorAll("li").length&&(s.closest(".Box").hidden=!0),O())})),f(".js-key-link-input",c((async function(e){const t=e.target.form,s=t.querySelectorAll(".js-key-link-input"),o=new FormData;for(const l of s)o.append(l.name,l.value);const r=t.querySelector(".js-key-link-check"),n=function(e){const t=e.getAttribute("src");if(!t)return"";const s=document.createElement("a");return s.href=t,s.href}(r),c=r.parentElement.querySelector(".js-key-link-check-csrf"),i=await fetch(n,{method:"POST",mode:"same-origin",body:o,headers:{"Scoped-CSRF-Token":c.value,"X-Requested-With":"XMLHttpRequest"}});if(!i.ok)return void(r.hidden=!0);const a=await i.text();r.innerHTML=a,r.hidden=!1}),300)),n(".js-setting-toggle",(async function(e,t){const s=e.querySelector(".js-status-indicator");J(s,"status-indicator-loading");try{await t.text(),J(s,"status-indicator-success")}catch(o){J(s,"status-indicator-failed")}})),e("change",".js-toggle-email-settings input",(function(){const e=document.querySelector(".js-notification-emails"),t=document.querySelector(".js-toggle-email-settings input:checked");e.classList.toggle("d-none",!t)})),e("change",".js-toggle-ci-failures-only-setting input",(function(){const e=!!document.querySelector(".js-toggle-ci-failures-only-setting input:checked"),t=document.querySelector(".js-ci-failures-only-settings input"),s=t.closest("label");s&&s.classList.toggle("color-text-tertiary",!e),e||(t.checked=!1),t.disabled=!e})),n(".js-revoke-access-form",(async function(e,t){await t.html();const s=e.getAttribute("data-id"),o=e.getAttribute("data-type-name"),r=document.querySelector(`.js-revoke-item[data-type='${o}'][data-id='${s}']`);r.remove(),r.classList.contains("new-token")&&document.querySelector(".js-flash-new-token").remove()})),e("click",".js-delete-oauth-application-image",(function(){const e=document.querySelector(".js-delete-oauth-application-image-form");g(e)})),e("click",".js-new-callback",(function(e){e.preventDefault();const t=e.currentTarget,s=t.closest(".js-callback-urls"),o=s.querySelector(".js-callback-url").cloneNode(!0);if(!(o instanceof HTMLElement))return;o.classList.remove("is-default-callback");o.querySelector("input").value="",s.classList.add("has-many"),t.parentNode.insertBefore(o,t)})),e("click",".js-delete-callback",(function(e){e.preventDefault();const t=e.currentTarget;t.closest(".js-callback-url").remove();const s=t.closest(".js-callback-urls");s.querySelectorAll(".js-callback-url").length<=1&&s.classList.remove("has-many")})),e("click",".js-oauth-application-whitelist .js-deny-this-request",(function(e){const t=e.currentTarget;t.nextElementSibling.value="denied",g(t.closest(".js-org-application-access-form"))})),e("click",".js-generate-integration-key",(function(){const e=document.querySelector(".js-integration-key-management-wrapper");e.classList.add("downloading"),e.classList.contains("js-integration-key-multi")&&(e.classList.add("has-keys"),setTimeout((function(){const e=document.querySelector(".js-integration-keys-container");e&&G(e)}),1e3))})),n(".js-remove-integration-key",(async function(e,t){try{await t.text()}catch(r){if(!r.response)throw r;e.closest("details").removeAttribute("open");const t=document.querySelector(".js-integration-key-management-wrapper"),s=t.querySelector(".js-error-container").querySelector(".js-error-message");switch(r.response.status){case 500:s.textContent="Oops, something went wrong.";break;case 404:s.textContent="Oops, that key could not be found.";break;default:s.textContent=r.response.json.message}return void t.classList.add("error")}const s=e.getAttribute("data-key-id"),o=document.getElementById(s);if(o){const e=o.closest(".js-integration-keys-container");e&&G(e)}})),e("click",".js-error-dismiss",(function(){const e=document.querySelector(".js-integration-keys-container");e&&G(e)})),e("change",".js-checkbox-scope",(function(e){const t=e.currentTarget;t.checked?Q(t,"user"):K(t,"user"),function(e){const t=e.closest(".js-check-scope-container").querySelectorAll(".js-checkbox-scope");for(const s of t)s!==e&&(e.checked?Q(s,e.value):K(s,e.value))}(t)})),e("change","[data-check-related-scopes]",(function(e){const t=e.currentTarget,s=t.getAttribute("data-check-related-scopes").split(" ");for(const o of s){const e=document.querySelectorAll(`[data-scope-for="${o}"] .js-checkbox-scope`);for(const s of e)t.checked?Q(s,t.value):K(s,t.value)}})),e("submit","#new_oauth_access",Y),e("submit",".js-edit-oauth-access",Y);const te="VISIBILITY_SELECTED_REPOSITORIES";function se(){const e=document.querySelector(".js-org-secrets-selection"),t=e.querySelector(".js-secrets-visibility-menu input:checked").getAttribute("value"),s=e.querySelector(".js-repository-items-dialog");s.hidden=t!==te;const o=e.querySelector(".js-repository-selection-component"),r=Array.from(o.querySelectorAll(".js-repository-item-checkbox")).filter((e=>e.checked)).length,n=s.querySelector(".js-selected-repos-label");n.hidden=t!==te,n.querySelector(".js-selected-repositories-count").textContent=r.toString(),n.querySelector(".js-multiple-repositories-text").hidden=1===r,n.querySelector(".js-single-repository-text").hidden=1!==r}function oe(e){const t=e.target.closest(".js-encrypt-submit").querySelector(".js-btn-save-secret");t&&(t.disabled=!1,t.setAttribute("aria-disabled","false"))}function re(e,t){const s=t.querySelector(".js-repo-access-error");s.textContent=e,s.classList.remove("d-none")}function ne(){for(const e of document.querySelectorAll(".js-repo-access-error"))e.textContent="",e.classList.add("d-none")}function ce(e){const t=e.querySelectorAll(".js-repo-access-entry").length;e.classList.toggle("is-empty",0===t);const s=e.querySelector(".js-collab-limit");if(s){const o=parseInt(s.getAttribute("data-collab-limit")||"",10),r=e.querySelector(".js-over-limit"),n=e.querySelector(".js-under-limit");r.classList.toggle("d-none",t<o),n.classList.toggle("d-none",t>=o)}}function ie(e){for(const t of e)t.hidden=!t.hidden}function ae(e){for(const t of e){t.disabled=!1;t.closest(".js-role-checkbox").classList.remove("color-text-tertiary")}}function le(e,t){e instanceof HTMLElement&&(e.hidden=t)}function ue(e){const t=e.querySelector(".js-authorized-pushers");if(!t.getAttribute("data-limit"))return;const s=parseInt(t.getAttribute("data-limit")||""),o=t.querySelectorAll(".js-authorized-user-or-team").length;t.classList.toggle("at-limit",o>=s)}e("click",".js-new-secret-value-button",(function(e){const t=e.currentTarget.closest(".js-secret-value-form-group");t.querySelector(".js-new-secret-value-input").hidden=!1,t.querySelector(".js-new-secret-value-prompt").hidden=!0,oe(e)})),e("reset",".js-org-secrets-selection .js-repository-selection-component",se),e("details-menu-selected",".js-secrets-visibility-menu",oe,{capture:!0}),e("details-menu-selected",".js-secrets-visibility-menu",se,{capture:!0}),e("details-menu-selected",".js-repo-access-team-select-menu",(function(e){const t=e.detail.relatedTarget,s=t.getAttribute("data-team-id")||"",o=t.closest(".js-repo-access-group").querySelector(".js-add-repo-access-field");o.value=s,g(o.form)}),{capture:!0}),n(".js-add-repo-access-form",(async function(e,t){ne();const s=(await t.json()).json;let o;const r=e.closest(".js-repo-access-container").querySelector(".js-repo-access-group");o="collaborators"===r.id?r.querySelector(".js-repo-access-list-invites"):r.querySelector(".js-repo-access-list");const n=e.querySelector(".js-add-repo-access-field");if(n instanceof HTMLInputElement){const e=n.value;n.value="","teams"===r.id&&function(e){const t=document.querySelector(".js-repo-access-team-select");if(t){let s=0;for(const o of t.querySelectorAll(".js-repo-access-team-select-option"))e===o.getAttribute("data-team-id")&&(o.hidden=!0),o.hidden||s++;0===s&&t.closest(".js-repo-access-group").classList.add("no-form")}}(e)}if(s.error)re(s.error,r);else{if(function(e){const t=e.querySelector(".js-add-new-collab");t&&(t.disabled=!0)}(e),o){o.insertAdjacentHTML("beforeend",s.html);const e=o.querySelectorAll(".js-repo-access-entry");e[e.length-1].querySelector("a").focus()}if(ce(r),s.seats||0===s.seats){const e=1===s.seats?"seat":"seats",t=document.getElementById("available-seats");t&&(t.innerHTML=`${s.seats} ${e}`)}}})),n(".js-remove-repo-access-form",(async function(e,t){if(e.hasAttribute("data-skip-remote"))return;try{await t.text()}catch(r){return void re(e.getAttribute("data-error-message")||"",e.closest(".js-repo-access-group"))}ne();const s=e.closest(".js-repo-access-entry"),o=e.closest(".js-repo-access-group");"teams"===o.id&&function(e){const t=document.querySelector(".js-repo-access-team-select");if(t){const s=t.querySelector(`[data-team-id='${e}']`);s instanceof HTMLElement&&(s.hidden=!1),t.closest(".js-repo-access-group").classList.remove("no-form")}}(s.getAttribute("data-team-id")||""),s.remove(),ce(o)})),e("combobox-commit",".js-repo-add-access-search",(function(e){if(!(e.target instanceof Element))return;const t=e.target.closest(".js-repo-add-access-search"),s=e.target.closest(".js-autocomplete-item");t.querySelector(".js-selected-member-id").textContent=e.target.getAttribute("data-autocomplete-label")||"selection";const o=t.querySelector(".js-selected-member-badge"),r=s.querySelector(".js-selection-badge");o.innerHTML=r.innerHTML,ie(Array.from(t.querySelectorAll(".js-repo-add-access-search-selected, .js-repo-add-access-search-selection")));const n=t.querySelector(".js-base-role-badge");le(n,!0);const c=s.getAttribute("data-type"),i=s.hasAttribute("data-admin"),a=i?"[data-disable-org-admin]":"[data-disable-org-role]",l=t.querySelectorAll(a),u=t.querySelectorAll('input[name="role"]');if(u.length>0){if(ae(u),"org-member"===c){le(n,!1);for(const e of l){e.disabled=!0;e.closest(".js-role-checkbox").classList.add("color-text-tertiary")}}if(i)t.querySelector(".js-role-admin").checked=!0;else if(n&&"org-member"===c){n.closest(".js-role-checkbox").querySelector('input[name="role"]').checked=!0}else"outside-collab"!==c&&"team"!==c&&"org-member"!==c&&"email"!==c||(t.querySelector(".js-role-pull").checked=!0)}})),e("click",".js-cancel-selection",(function(e){if(!(e.target instanceof Element))return;const t=e.target.closest(".js-repo-add-access-search");t.querySelector(".js-repo-add-access-search-input").value="";ae(t.querySelectorAll('input[name="role"]')),ie(Array.from(t.querySelectorAll(".js-repo-add-access-search-selected, .js-repo-add-access-search-selection")));le(t.querySelector(".js-base-role-badge"),!0)})),e("details-dialog-close",".js-add-access-form",(function({currentTarget:e}){const t=e.querySelector(".js-repo-add-access-search-input");t.value="";ae(t.querySelectorAll('input[name="role"]'));const s=e.querySelector(".js-repo-add-access-search-selection"),o=e.querySelector(".js-repo-add-access-search-selected");if(o.hidden)return;ie([o,s]);le(t.querySelector(".js-base-role-badge"),!0)})),e("change",".js-repo-features-form input[type=checkbox]",(function({currentTarget:e}){const t=e.closest(".js-repo-option").querySelector(".js-status-indicator");t.classList.remove("status-indicator-success","status-indicator-failed"),t.classList.add("status-indicator-loading")})),n(".js-repo-features-form",(async function(e,t){let s;try{s=await t.html()}catch(o){for(const t of e.querySelectorAll(".status-indicator-loading")){t.classList.remove("status-indicator-loading"),t.classList.add("status-indicator-failed");const e=t.closest(".js-repo-option").querySelector("input[type=checkbox]");e.checked=!e.checked}return}for(const r of e.querySelectorAll(".status-indicator-loading"))r.classList.remove("status-indicator-loading"),r.classList.add("status-indicator-success");document.querySelector(".js-repo-nav").replaceWith(s.html)})),e("change",".js-merge-features-form input[type=checkbox]",(function({currentTarget:e}){const t=e.form;for(const o of t.querySelectorAll(".errored"))o.classList.remove("errored");const s=e.closest(".js-repo-option").querySelector(".js-status-indicator");s.classList.remove("status-indicator-success","status-indicator-failed"),s.classList.add("status-indicator-loading")})),n(".js-merge-features-form",(async function(e,t){try{await t.text()}catch(s){const t=s.response&&s.response.text.endsWith("(protected_branch_policy)")?".js-no-merge-commit-warning":".js-select-one-warning";for(const o of e.querySelectorAll(t))o instanceof HTMLElement&&(o.hidden=!1);for(const o of e.querySelectorAll(".status-indicator-loading")){o.classList.remove("status-indicator-loading"),o.classList.add("status-indicator-failed");const e=o.closest(".js-repo-option");e.classList.add("errored");const t=e.querySelector("input[type=checkbox]");t.checked=!t.checked}for(const o of e.querySelectorAll(".status-indicator-success"))o.classList.remove("status-indicator-success");return}for(const o of e.querySelectorAll(".errored"))o.classList.remove("errored");for(const o of e.querySelectorAll(".js-select-one-warning, .js-no-merge-commit-warning"))o instanceof HTMLElement&&(o.hidden=!0);for(const o of e.querySelectorAll(".status-indicator-loading"))o.classList.remove("status-indicator-loading"),o.classList.add("status-indicator-success")})),e("change","input.js-required-status-toggle",(function({currentTarget:e}){e.closest(".js-protected-branch-settings").querySelector(".js-required-statuses").classList.toggle("d-none",!e.checked)})),e("change","input.js-required-deployments-toggle",(function({currentTarget:e}){e.closest(".js-protected-branch-settings").querySelector(".js-required-deployments").hidden=!e.checked})),e("change","input.js-required-status-checkbox",(function({currentTarget:e}){e.closest(".js-protected-branches-item").querySelector(".js-required-status-badge").classList.toggle("d-none",!e.checked)})),e("change",".js-authorized-branch-pushers-toggle, input.js-authorized-review-dismisser-toggle",(function({currentTarget:e}){const t=e.closest(".js-protected-branch-options").querySelector(".js-authorized-pushers");t.classList.toggle("d-none",!e.checked),t.querySelector(".js-add-protected-branch-user-or-team input").focus()})),e("click",".js-protected-branch-merge-queue-toggle",(function(e){const t=e.currentTarget,s=t.getAttribute("data-confirm-if-checked")||"";t.checked||confirm(s)||e.preventDefault();t.closest(".js-protected-branch-settings").querySelector(".js-protected-branch-merge-queue-settings").hidden=!t.checked})),e("change",".js-protected-branch-include-admin-toggle",(function({currentTarget:e}){const t=e.closest(".js-protected-branch-settings").querySelectorAll(".js-protected-branch-admin-permission");for(const s of t)s.classList.toggle("d-none"),s.classList.toggle("active",!s.classList.contains("d-none"))})),e("auto-complete-change",".js-add-protected-branch-user-or-team",(async function({target:e}){const t=e,s=t.value;if(!s)return;t.value="";const o=t.closest(".js-protected-branch-options"),r=o.querySelector(".js-authorized-users-and-teams"),n=r.querySelector(`div[data-user-or-team-name='${s}']`);if(n)return void n.querySelector(".js-protected-branch-pusher").classList.add("user-already-added");const c=t.getAttribute("data-add-url"),i=new URL(c,window.location.origin),a=new URLSearchParams(i.search.slice(1));a.append("item",s),i.search=a.toString(),r.append(await p(document,i.toString())),ue(o)})),e("click",".js-remove-authorized-user-or-team",(function({currentTarget:e}){const t=e.closest(".js-protected-branch-options");e.closest(".js-authorized-user-or-team").remove(),ue(t)})),i("#pages-cname-field",{constructor:HTMLInputElement,add(e){v(e,(function(){document.querySelector(".js-pages-cname-save-btn").disabled=e.value===e.defaultValue}))}}),i(".js-pages-https-status-form",{constructor:HTMLFormElement,add(e){const t=new Request(e.action,{method:e.method,body:new FormData(e)});(async()=>{try{const s=await p(document,t);e.replaceWith(s)}catch(s){if(!s.response||404!==s.response.status)throw s}})()}});function de(){return document.querySelector(".js-update-page-source-btn")}function me(e){const t=document.querySelector(`input[name=${e}]:checked`);return t?t.value:null}setTimeout((async function e(){const t=document.querySelector(".js-pages-certificate-status");if(t){const s=t.getAttribute("data-status-url"),o=await p(document,s);t.replaceWith(o),setTimeout(e,15e3)}}),15e3);const pe=me("source"),he=me("source_dir");e("change",".js-select-branch",(e=>{const t=e.target;if("source"!==t.name)return;const s=document.querySelector(".js-select-source-dir"),o=document.querySelector(".js-branch-icon");""!==t.value?(o.hidden=!1,s.hidden=!1):(o.hidden=!0,s.hidden=!0);const r=document.querySelector(".js-disable-page-warning")||null;null!=r&&(""===t.value?r.hidden=!1:r.hidden=!0),t.value!==pe?(de().disabled=!1,""===t.value&&null!=r&&(de().disabled=!0)):he!==me("source_dir")&&""!==pe||(de().disabled=!0)})),e("change",".js-select-source-dir",(e=>{const t=e.target;if("source_dir"!==t.name)return;t.value!==he?de().disabled=!1:me("source")===pe&&(de().disabled=!0)})),e("submit",".js-repo-restore",(async function(e){const t=e.currentTarget;let s;e.preventDefault();const o=t.closest(".js-deleted-repository");try{s=await fetch(t.action,{method:t.method,body:new FormData(t),headers:{Accept:"text/html","X-Requested-With":"XMLHttpRequest"}})}catch(r){}if(!s||!s.ok)return;!function(e,t){const s=e.querySelector(".js-restore-status");s.innerHTML="",s.append(t)}(o,j(document,await s.text()))})),i(".js-restore-repo-job",(function(e){!function(e){e.querySelector("form>button").disabled=!0,e.querySelector("summary").classList.add("disabled");for(const t of e.querySelectorAll("details"))t.removeAttribute("open")}(e.closest(".js-deleted-repository"))})),e("click",".js-disableable-summary.disabled",(e=>e.preventDefault())),e("click",".js-used-by-selector-button",(function({currentTarget:e}){const t=e.closest(".js-used-by-selector");if(null!=t){const e=t.querySelector(".js-status-indicator");null!=e&&(e.classList.remove("status-indicator-success","status-indicator-failed"),e.classList.add("status-indicator-loading"))}}));const fe=new WeakMap,ge=new WeakMap;async function ye(e){const t=e.closest(".js-repository-selection-component"),s=fe.get(t)||0;if(s>100)return;e.textContent=e.getAttribute("data-disable-with"),e.disabled=!0,fe.set(t,s+1);!async function(e,t){const s=await p(document,t);e.querySelector(".js-more-repository-items-replace-target").replaceWith(s),function(e){l(e.querySelector(".js-repository-items-filter-input"),"change")}(e)}(t,e.getAttribute("data-url")),await Promise.resolve(),t.dispatchEvent(new CustomEvent("repository-items-loaded"))}function je(e,t){const s=e.querySelector(".js-btn-select-repositories");s.disabled=!t,s.setAttribute("aria-disabled",String(!t))}function be(e){const t=e.currentTarget,s=t.closest(".js-repository-items-dialog");if(!s)return;const o=Array.from(t.querySelectorAll(".js-repository-item-checkbox")).filter((e=>e.checked)).length,r=s.querySelector(".js-selected-repositories-count-container");r.querySelector(".js-selected-repositories-count").textContent=o.toString(),r.querySelector(".js-multiple-repositories-text").hidden=1===o,r.querySelector(".js-single-repository-text").hidden=1!==o}e("click",".js-more-repository-items-button",(function(e){ye(e.currentTarget)})),i(".js-more-repository-items-button",{constructor:HTMLButtonElement,add:ye}),e("change",".js-repository-selection-component",be),e("reset",".js-repository-selection-component",be),e("change",".js-repository-selection-component",(function(e){const t=e.target;if("checkbox"!==(null==t?void 0:t.type))return;const s=t.closest(".js-repository-selection-component"),o=ge.get(s)||new Set;o.has(t.value)?o.delete(t.value):o.add(t.value),ge.set(s,o),je(t.closest(".js-repository-items-dialog"),o.size>0)})),e("click",".js-btn-select-repositories",(function(e){const t=e.target.closest(".js-repository-items-dialog").querySelector(".js-repository-selection-component");ge.set(t,new Set);t.closest("details-dialog").toggle(!1),se(),oe(e)})),e("details-dialog-close",".js-repository-items-dialog",(function(e){const t=e.currentTarget.closest(".js-repository-items-dialog");if(!t)return;const s=t.querySelector(".js-repository-selection-component");if(!s.hasAttribute("data-discard-changes-on-close"))return;const o=ge.get(s);if(o){for(const e of o.keys()){const t=s.querySelector(`[value='${e}']`);t.checked=!t.checked}ge.set(s,new Set),je(t,!1)}}));const ve="team_ids[]";e("click",".js-repo-toggle-team",(async function(){const e=(e=>{const t=new URLSearchParams(window.location.search),s=new Set(t.getAll(ve)),o=document.querySelectorAll(e);for(const r of o)r.checked?s.add(r.value):s.delete(r.value);return[...s]})(".js-repo-toggle-team");for(const t of document.querySelectorAll(".js-repo-team-suggestions-pagination > a")){const s=t.getAttribute("href");if(s){const o=new URL(s,window.location.origin),r=new URLSearchParams(o.search.slice(1));r.delete(ve);for(const t of e)r.append(ve,t);o.search=r.toString(),t.setAttribute("href",o.toString())}}document.querySelector('[name="team_ids"]').value=e.join(",")})),f(".js-synced-repo-owner-input",(function(e){const t=e.target,s=t.getAttribute("data-sync");if(!s)return;const o=document.querySelectorAll(`[data-sync-with="${s}"]`);for(const r of o)r.textContent=t.value}));let Se=class RetentionFormElement extends HTMLElement{validate(){if(this.resetState(),!this.input.value)return;const e=+this.input.value,t=this.input.getAttribute("data-min"),s=this.input.getAttribute("data-max");return t&&e<+t?(this.group.classList.add("errored"),this.minMessage.hidden=!1,void S(this.note)):s&&e>+s?(this.group.classList.add("errored"),this.maxMessage.hidden=!1,void S(this.note)):void(this.button.disabled=!1)}resetState(){this.minMessage.hidden=!0,this.maxMessage.hidden=!0,this.group.classList.remove("errored"),this.button.disabled=!0}};function qe({currentTarget:e}){if(e instanceof Element){const t=e.querySelector(".js-runner-bulk-form");g(t)}}function ke({currentTarget:e}){if(e instanceof Element){const t=e.querySelector(".js-runner-labels-form");g(t)}}t([s],Se.prototype,"group",void 0),t([s],Se.prototype,"input",void 0),t([s],Se.prototype,"button",void 0),t([s],Se.prototype,"minMessage",void 0),t([s],Se.prototype,"maxMessage",void 0),t([s],Se.prototype,"note",void 0),Se=t([o],Se),e("change",".js-runner-bulk-actions-toggle",(function(){const e=!!document.querySelector(".js-runner-bulk-actions-toggle:checked");document.querySelector(".js-runner-default-header").hidden=e,document.querySelector(".js-runner-bulk-actions-header").hidden=!e})),e("details-menu-selected",".js-runner-bulk-menu",(function(e){const t=e.detail.relatedTarget,s=t.closest(".js-runner-bulk-menu"),o=function(e){const t="true"===e.getAttribute("aria-checked"),s=document.createElement("input");return s.type="hidden",s.name=t?"add[]":"remove[]",s.value=e.getAttribute("data-value"),s}(t),r=s.querySelector(".js-runner-bulk-form"),n=r.querySelector(`[value='${o.value}']`);n?n.replaceWith(o):r.append(o),s.addEventListener("toggle",qe,{once:!0})}),{capture:!0}),n(".js-create-runner-label-form",(async function(e,t){var s;let o;const r=e.closest(".js-runner-labels-menu"),n=r.querySelector(".js-runner-label-error");try{o=await t.html()}catch(a){return void((null===(s=a.response.json)||void 0===s?void 0:s.message)&&n&&(n.textContent=a.response.json.message,n.hidden=!1))}if(!o||!o.html)return;n&&(n.hidden=!0,n.textContent="");const c=o.html.querySelector(".js-label-input");r.querySelector(".js-filterable-runner-labels").prepend(o.html),null==c||c.click();const i=r.querySelector(".js-label-filter-field");i.value="",i.focus()})),e("details-menu-selected",".js-runner-labels-details",(function(e){e.currentTarget.addEventListener("toggle",ke,{once:!0})}),{capture:!0}),n(".js-saved-reply-delete",(async function(e,t){await t.text();const s=e.closest(".js-saved-reply-container"),o=s.querySelectorAll(".js-saved-reply-list-item").length;s.classList.toggle("has-replies",o>1);const r=s.querySelector(".js-saved-reply-empty-container");1===o&&(r.hidden=!1);e.closest(".js-saved-reply-list-item").remove()}));let we=class AdvancedSecurityNewReposElement extends HTMLElement{toggle(){this.checkbox.checked?(this.status.hidden=!0,this.dialog.open=!0):(this.status.hidden=!1,g(this.form))}confirm(){this.status.hidden=!1,g(this.form),this.dialog.open=!1}close(){this.checkbox.checked=!1}};function Le(){return document.querySelector(".js-add-u2f-registration-form")}t([s],we.prototype,"checkbox",void 0),t([s],we.prototype,"status",void 0),t([s],we.prototype,"dialog",void 0),t([s],we.prototype,"form",void 0),we=t([o],we);const Ae="data-webauthn-register-request";function Te(e){var t;e.webauthn_register_request&&(null===(t=Le())||void 0===t||t.setAttribute(Ae,JSON.stringify(e.webauthn_register_request)))}function xe(e,t){const s=document.querySelector(".js-new-u2f-registration");s.classList.add("is-showing-error"),s.classList.remove("is-sending");for(const r of s.querySelectorAll(".js-webauthn-message"))r.hidden=!0;const o=s.querySelector(e);t&&(o.textContent=t),o.hidden=!1}async function Ee(e){if(!(await w()))throw new Error("sudo failed");const t=document.querySelector(".js-add-u2f-registration-form");let s;t.elements.namedItem("response").value=JSON.stringify(e);try{if(s=await fetch(t.action,{method:t.method,body:new FormData(t),headers:{accept:"application/json","X-Requested-With":"XMLHttpRequest"}}),!s.ok)throw new Error("Response was not ok");const e=await s.json();Te(e),document.querySelector(".js-new-u2f-registration").classList.remove("is-sending","is-active"),document.querySelector(".js-u2f-registration-nickname-field").value="";const o=e.registration;if(o){const e=document.querySelector(".js-u2f-registrations");e?e.append(j(document,o)):(document.querySelector(".js-new-u2f-registration-success").hidden=!1,document.querySelector(".js-new-u2f-registration").hidden=!0,document.querySelector(".js-new-u2f-registration-alternative").hidden=!0,document.querySelector(".js-trusted-device-continue").focus())}}catch(o){if(s){const e=await s.json();Te(e),xe(".js-webauthn-server-error",e.error)}else xe(".js-webauthn-registration-error")}}async function Ce(){try{!function(){const e=document.querySelector(".js-new-u2f-registration");e.classList.add("is-sending"),e.classList.remove("is-showing-error")}();const e=JSON.parse(Le().getAttribute(Ae)),t=await k(e);await Ee(t)}catch(e){throw xe(".js-webauthn-registration-error"),e}}function Me(){Ce()}n(".js-u2f-registration-delete",(async function(e,t){const s=e.closest(".js-u2f-registration");s.classList.add("is-sending");Te((await t.json()).json),s.remove()})),e("click",".js-add-u2f-registration-link",(function(){const e=document.querySelector(".js-new-u2f-registration");e.classList.add("is-active"),e.classList.remove("is-showing-error");document.querySelector(".js-u2f-registration-nickname-field").focus()})),e("click",".js-add-u2f-registration-retry",(function(){Me()})),i(".js-add-u2f-registration-form.for-trusted-device",{constructor:HTMLFormElement,add(e){e.hidden=!1;document.querySelector(".js-trusted-device-registration-button").focus()}}),e("submit",".js-add-u2f-registration-form",(function(e){e.preventDefault(),Me()})),i(".js-webauthn-box",(function(e){e.classList.toggle("available",q())}));let _e=class SelectedItemListElement extends HTMLElement{connectedCallback(){this.includeFragment.addEventListener("include-fragment-replaced",(()=>{this.updateCount()}))}get count(){return this.items.filter((e=>e.checked)).length}updateCount(){const e=this.count;this.selectedCount.textContent=String(e),this.description.hidden=e<=0,this.pluralItemsDescription.hidden=1===e,this.singularItemDescription.hidden=1!==e}hideDescription(){this.description.hidden=!0}showDescription(){const e=this.count;this.description.hidden=e<=0}};t([s],_e.prototype,"selectedCount",void 0),t([s],_e.prototype,"pluralItemsDescription",void 0),t([s],_e.prototype,"singularItemDescription",void 0),t([s],_e.prototype,"description",void 0),t([r],_e.prototype,"items",void 0),t([s],_e.prototype,"includeFragment",void 0),_e=t([o],_e);let Pe=class ThemePickerElement extends HTMLElement{constructor(){super(...arguments),this.scrolledPage=0}connectedCallback(){this.theme(this.themeLinks.find((e=>e.classList.contains("selected")))||this.themeLinks[0]),this.updateScrollLinks()}hideSpinner(){this.spinner.hidden=!0}onThemeLinkClick(e){this.theme(e.currentTarget),e.preventDefault()}toggleFullPicker(e){const t=e.currentTarget;this.fullPicker.hidden=!this.fullPicker.hidden,this.miniPicker.hidden=!this.fullPicker.hidden,this.scrollToTheme(this.theme(),!1),t.classList.toggle("open")}onEditClick(e){this.editForm&&g(this.editForm),e.preventDefault()}onPublishClick(e){var t;this.publishThemeSlugInput&&(this.publishThemeSlugInput.value=(null===(t=this.theme())||void 0===t?void 0:t.getAttribute("data-theme-slug"))||""),this.publishForm&&g(this.publishForm),e.preventDefault()}prevPage(){this.scrollToTheme(this.themeLinks[0]),this.updateScrollLinks()}nextPage(){this.scrollToTheme(this.themeLinks[6]),this.updateScrollLinks()}updateScrollLinks(){const e=0===this.scrolledPage;this.scrollBackwardsLink.disabled=e,this.scrollBackwardsLink.classList.toggle("disabled",e),this.scrollForwardsLink.disabled=!e,this.scrollForwardsLink.classList.toggle("disabled",!e)}selectedThemeIndex(){return this.themeLinks.indexOf(this.selectedTheme)}prevTheme(e){let t=(this.selectedThemeIndex()-1)%this.themeLinks.length;t<0&&(t+=this.themeLinks.length),this.theme(this.themeLinks[t]),e.preventDefault()}nextTheme(e){this.theme(this.themeLinks[(this.selectedThemeIndex()+1)%this.themeLinks.length]),e.preventDefault()}scrollToTheme(e,t=!0){this.scrolledPage=Math.floor(this.themeLinks.indexOf(e)/6);let s=0;if(this.scrolledPage>0){const e=this.themeLinks[6*this.scrolledPage];s=e.offsetLeft}const o=this.themeLinksContainer,r=s-o.scrollLeft;if(t&&0!==r){const e=150;n=t=>{if(t<0)return;const n=o.scrollLeft;return o.scrollLeft=Math[s-n>0?"min":"max"](n+r*(t/e),s),n!==o.scrollLeft&&void 0},new Promise((e=>{let t=performance.now();!function s(){window.requestAnimationFrame((o=>{!1!==n(o-t)?(t=o,s()):e()}))}()}))}else o.scrollLeft=s;var n}theme(e){if(!e)return this.selectedTheme;this.selectedTheme=e,this.showPreviewFor(e);for(const t of this.themeLinks)t.classList.remove("selected");e.classList.add("selected"),this.scrollToTheme(e),this.themeName.textContent=e.getAttribute("data-theme-name")}showPreviewFor(e){var t;this.spinner.hidden=!1,e.getAttribute("data-theme-gem")?this.pagePreview.setAttribute("src",e.href):(this.themeSlugInput&&(this.themeSlugInput.value=(null===(t=this.theme())||void 0===t?void 0:t.getAttribute("data-theme-slug"))||""),this.previewForm&&g(this.previewForm))}};function He(e,t){e.querySelector(".js-add-new-user").disabled=!t}function De(e){const t=e.currentTarget.closest("form"),s=t.querySelectorAll('[name="codespaces_user_secret[repository_ids][]"]:checked').length;t.querySelector('[data-target="selected-repositories.plural"]').hidden=1===s,t.querySelector('[data-target="selected-repositories.singular"]').hidden=1!==s,t.querySelector('[data-target="selected-repositories.count"]').textContent=String(s),t.querySelector('[data-target="selected-repositories.active-warning"]').hidden=0!==s}function Ie(e,t){const s=e.value;e.value=t.textContent||"",t.textContent=s}t([s],Pe.prototype,"pagePreview",void 0),t([s],Pe.prototype,"spinner",void 0),t([s],Pe.prototype,"fullPicker",void 0),t([s],Pe.prototype,"miniPicker",void 0),t([s],Pe.prototype,"themeName",void 0),t([s],Pe.prototype,"scrollBackwardsLink",void 0),t([s],Pe.prototype,"scrollForwardsLink",void 0),t([s],Pe.prototype,"themeLinksContainer",void 0),t([r],Pe.prototype,"themeLinks",void 0),t([s],Pe.prototype,"themeSlugInput",void 0),t([s],Pe.prototype,"editForm",void 0),t([s],Pe.prototype,"publishForm",void 0),t([s],Pe.prototype,"publishThemeSlugInput",void 0),t([s],Pe.prototype,"previewForm",void 0),Pe=t([o],Pe),e("upload:setup",".js-upload-repository-image",(function(){document.querySelector(".js-remove-repository-image-button").hidden=!0})),e("upload:complete",".js-upload-repository-image",(function(e){const{attachment:t}=e.detail;document.querySelector(".js-repository-image-id").value=t.id,document.querySelector(".js-remove-repository-image-button").hidden=!1,document.querySelector(".js-repository-image-container").style.backgroundImage=`url(${t.href})`})),i(".js-add-user-form",(function(e){He(e,!1)})),e("auto-complete-change",".js-add-user-completer",(function({target:e}){const t=e;He(t.closest(".js-add-user-form"),!!t.value);const s=document.querySelector(".js-designated-user");s&&(t.value?s.textContent="@"+t.value:s.textContent=s.getAttribute("data-autocomplete-text"))})),n(".js-remote-submit",(async function(e,t){const s=await t.html(),o=document.querySelector(".js-user-block-settings-list"),r=o.querySelector(".js-blocked-list"),n=o.querySelector(".js-user-block-blank-slate");He(e,!1);const c=e.querySelector(".js-add-blocked-user-field");b(c,""),n.hidden=!0,r.hidden=!1,r.prepend(s.html)})),n(".js-user-sessions-revoke",(async function(e,t){await t.text();const s=e.closest(".js-user-sessions-container");if(e.closest(".js-user-session").remove(),s){const e=s.querySelectorAll(".js-user-session").length;s.classList.toggle("has-active-sessions",e>0)}})),n(".js-verify-ssh-key",(async function(e,t){await t.html();const s=e.closest("li");s.querySelector(".js-unverified-user-key-notice").remove(),s.querySelector(".js-user-key-icon").classList.remove("color-text-danger"),e.remove()})),n(".js-leave-collaborated-repo",(async function(e,t){await t.html();const s=e.getAttribute("data-repo-id"),o=e.getAttribute("data-owner-login");document.querySelector(`.js-collab-repo[data-repo-id='${s}']`).remove(),document.querySelector(".js-collab-repo")||(document.querySelector(".js-collaborated-repos-empty").hidden=!1,document.querySelector(".js-collaborated-repos").hidden=!0);const r=document.querySelector(`.js-collab-repo-owner[data-owner-login='${o}']`);r&&(r.querySelector(".js-collab-repo")||r.remove())})),e("submit",".js-codespaces-user-settings-form",(async e=>{const t=e.currentTarget;e.preventDefault();const s=await fetch(t.action,{method:t.method,body:new FormData(t),headers:{Accept:"text/fragment+html"}});if(s.status>=400){const e="An unknown error occurred.",t=document.querySelector("template.js-flash-template");t.after(new a(t,{className:"flash-error",message:e}))}else{const e=t.closest("[data-replace-remote-form-target]"),o=j(document,await s.text());e.replaceWith(o)}})),e("click",".js-codespaces-user-secrets-form input[name=repo]",(async e=>{const t=e.currentTarget,s=t.closest("form");if(!s.querySelector(`[name="codespaces_user_secret[repository_ids][]"][value="${t.value}"]`)){const o=t.closest(".select-menu-item-text").querySelector("[data-menu-button-contents]").textContent;if(o&&t.value){const e=function(e,t){const s=document.createElement("li");s.className="css-truncate d-flex flex-items-center width-full";const o=document.createElement("input");o.className="repository-item-checkbox js-repository-item-checkbox mx-2 position-absolute",o.type="checkbox",o.name="codespaces_user_secret[repository_ids][]",o.value=t,o.id="user-secret-repo-"+t,o.checked=!0,s.append(o);const r=document.createElement("label");return r.className="repository-item-name d-flex flex-items-center width-full color-text-primary py-1 pr-1 pl-5",r.setAttribute("for","user-secret-repo-"+t),r.title=e,r.textContent=e,s.append(r),s}(o,t.value);s.querySelector('[data-target="selected-repositories.repositories"]').append(e)}De(e)}t.closest("details").removeAttribute("open"),e.preventDefault()})),e("change",'.js-codespaces-user-secrets-form input[name="codespaces_user_secret[repository_ids][]"]',De),e("focusout",'.js-codespaces-user-secrets-form input[name="codespaces_user_secret[name]"]',(e=>{const t=e.currentTarget,s=t.value,o=new RegExp("^(?!github).+","i"),r=t.closest("div.form-group");o.test(s)?(t.setCustomValidity(""),r.classList.remove("errored")):(t.setCustomValidity('Secret names cannot start with "GITHUB"'),r.classList.add("errored"));t.closest("form").dispatchEvent(new Event("change"))})),e("focusout",'.js-codespaces-user-secrets-form textarea[name="secret_value"]',(e=>{const t=e.currentTarget,s=t.value,o=t.closest("div.form-group");""===s.trim()?o.classList.add("errored"):o.classList.remove("errored")})),e("click","#load-readme",(function(e){const t=document.querySelector("#gollum-editor-body"),s=document.querySelector("#editor-body-buffer"),o=document.querySelector("#undo-load-readme"),r=s.textContent,n=e.currentTarget.getAttribute("data-readme-name");Ie(t,s),e.currentTarget instanceof HTMLButtonElement&&(e.currentTarget.disabled=!0,e.currentTarget.textContent=n+" loaded",o.classList.remove("d-none"),t.addEventListener("input",(function e(){t.value!==r&&(o.classList.add("d-none"),t.removeEventListener("input",e))})))})),e("click","#undo-load-readme",(function(e){Ie(document.querySelector("#gollum-editor-body"),document.querySelector("#editor-body-buffer"));const t=document.querySelector("#load-readme"),s=t.getAttribute("data-readme-name");t.disabled=!1,t.textContent="Load "+s,e.currentTarget.classList.add("d-none")}))}}}));
//# sourceMappingURL=settings-8c513a2e.js.map
